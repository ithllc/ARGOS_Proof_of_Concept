# Prompt for AI Coding Agent: Frontend and Server Integration

**Objective:** Complete the 'Mini-ARGOS' POC by creating the frontend using CopilotKit and finalizing the FastAPI server to serve it.

**Project Context:**
This project is a multi-agent system for research analysis. The backend agents and testing are complete. Your task is to build the user-facing interface and connect it to the backend. The project is structured to be deployed as a containerized application.

**Required Reading:**
Before you begin, you MUST familiarize yourself with the project by reviewing these documents:
1.  `/llm_models_python_code_src/ARGOS_POC/docs/technical_plan_poc.md`: Describes the overall technical plan and architecture.
2.  `/llm_models_python_code_src/ARGOS_POC/docs/scaled_down_ideas_claude.md`: Provides the high-level concept for POC Idea #5, which this project is based on.
3.  `/llm_models_python_code_src/CoPilotKit`: Review the contents of this directory to understand the features and implementation patterns of CopilotKit, which is required for the frontend.

---

### Your Tasks

#### Task 1: Create the CopilotKit Frontend

Your first task is to build the React-based frontend in the `/llm_models_python_code_src/ARGOS_POC/frontend/` directory.

**Requirements:**
1.  **Initialize a React App:** If not already present, use `create-react-app` or Vite to scaffold a new React application in the `frontend` directory.
2.  **Install Dependencies:** Add `@copilotkit/react-ui` and `@copilotkit/react-core` to your `package.json`.
3.  **Implement the UI:**
    *   Create a main `App.tsx` component.
    *   Use the `<CopilotKit>` provider to wrap your application.
    *   Implement a chat interface using the `<CopilotPopup>` or a custom component with the `useCopilotChat` hook. This will be the primary way the user interacts with the system.
    *   The frontend should communicate with the FastAPI backend, which will be running at `http://localhost:8000`. Configure the `CopilotKit` provider to point to the backend's CopilotKit endpoint (e.g., `/api/copilotkit`).

#### Task 2: Finalize the FastAPI Server (`src/main.py`)

Your second task is to complete the FastAPI server to handle frontend requests and serve the React application.

**Requirements:**
1.  **Serve the Frontend:**
    *   Configure the FastAPI app to serve the static files generated by the React build process (e.g., from `frontend/build`). Use `StaticFiles` to mount the build directory.
    *   Create a catch-all route that serves `index.html` for any path not matched by the API, allowing React Router to handle client-side routing.
2.  **Create the CopilotKit Backend Endpoint:**
    *   Implement a `POST` endpoint (e.g., `/api/copilotkit`).
    *   This endpoint will receive requests from the CopilotKit frontend.
    *   Instantiate a `CopilotRuntime` instance.
    *   Use the `CopilotRuntime.stream` method to process the incoming request and stream back the response.
    *   This endpoint will act as the bridge between the user's chat input and the `CoordinatorAgent`. You will need to import and call the `CoordinatorAgent`'s main function from here, passing it the user's message.
3.  **WebSocket for Real-time Updates (Stretch Goal):**
    *   If time permits, implement a WebSocket endpoint (`/ws/status`).
    *   This endpoint should subscribe to the `agent:activity` channel in Redis.
    *   When a message is received from Redis, it should be forwarded to all connected WebSocket clients. This will allow the frontend to display real-time status updates from the agents.

---

**Final Deliverable:**
A fully integrated application where a user can type a research query into the CopilotKit chat interface, have it processed by the backend agents, and see the results streamed back to the UI.